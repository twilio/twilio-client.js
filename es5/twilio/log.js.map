{"version":3,"file":"log.js","sourceRoot":"","sources":["../../lib/twilio/log.ts"],"names":[],"mappings":";AAAA;;;;GAIG;;AAEH,yCAA2C;AAC3C,yCAA2C;AAa3C;;;GAGG;AACH;IA2BE;;;OAGG;IACH,aAAY,OAAoB;QAC9B,IAAI;YACF,IAAI,CAAC,IAAI,GAAG,CAAC,OAAO,IAAI,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,wBAAY,CAAC,CAAC;SACnH;QAAC,WAAM;YACN,2BAA2B;YAC3B,OAAO,CAAC,IAAI,CAAC,6BAA6B,CAAC,CAAC;YAC5C,IAAI,CAAC,IAAI,GAAG,OAAc,CAAC;SAC5B;IACH,CAAC;IAjCD;;;OAGG;IACI,eAAW,GAAlB;QACE,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE;YACjB,GAAG,CAAC,QAAQ,GAAG,IAAI,GAAG,EAAE,CAAC;SAC1B;QACD,OAAO,GAAG,CAAC,QAAQ,CAAC;IACtB,CAAC;IA0BD;;;OAGG;IACH,mBAAK,GAAL;;QAAM,cAAc;aAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;YAAd,yBAAc;;QAClB,CAAA,KAAA,IAAI,CAAC,IAAI,CAAA,CAAC,KAAK,WAAI,IAAI,EAAE;IAC3B,CAAC;IAED;;;OAGG;IACH,mBAAK,GAAL;;QAAM,cAAc;aAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;YAAd,yBAAc;;QAClB,CAAA,KAAA,IAAI,CAAC,IAAI,CAAA,CAAC,KAAK,WAAI,IAAI,EAAE;IAC3B,CAAC;IAED;;;OAGG;IACH,kBAAI,GAAJ;;QAAK,cAAc;aAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;YAAd,yBAAc;;QACjB,CAAA,KAAA,IAAI,CAAC,IAAI,CAAA,CAAC,IAAI,WAAI,IAAI,EAAE;IAC1B,CAAC;IAED;;OAEG;IACH,6BAAe,GAAf,UAAgB,KAAkC;QAChD,IAAI,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;YAC7B,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;SAClC;aAAM;YACL,2BAA2B;YAC3B,OAAO,CAAC,IAAI,CAAC,+BAA+B,CAAC,CAAC;SAC/C;IACH,CAAC;IAED;;;OAGG;IACH,kBAAI,GAAJ;;QAAK,cAAc;aAAd,UAAc,EAAd,qBAAc,EAAd,IAAc;YAAd,yBAAc;;QACjB,CAAA,KAAA,IAAI,CAAC,IAAI,CAAA,CAAC,IAAI,WAAI,IAAI,EAAE;IAC1B,CAAC;IAlFD;;OAEG;IACI,UAAM,GAA4B,cAAc,CAAC,MAAM,CAAC;IAgFjE,UAAC;CAAA,AApFD,IAoFC;AAED,kBAAe,GAAG,CAAC","sourcesContent":["/**\n * @packageDocumentation\n * @module Voice\n * @internalapi\n */\n\nimport * as LogLevelModule from 'loglevel';\nimport { PACKAGE_NAME } from './constants';\n\n/**\n * Options that may be passed to the {@link Log} constructor for internal testing.\n * @private\n */\nexport interface LogOptions {\n  /**\n   * Custom loglevel module\n   */\n  LogLevelModule: any;\n}\n\n/**\n * {@link Log} provides logging features throught the sdk using loglevel module\n * See https://github.com/pimterry/loglevel for documentation\n */\nclass Log {\n  /**\n   * Log levels\n   */\n  static levels: LogLevelModule.LogLevel = LogLevelModule.levels;\n\n  /**\n   * Create the logger singleton instance if it doesn't exists\n   * @returns The singleton {@link Log} instance\n   */\n  static getInstance(): Log {\n    if (!Log.instance) {\n      Log.instance = new Log();\n    }\n    return Log.instance;\n  }\n\n  /**\n   * The logger singleton instance\n   */\n  private static instance: Log;\n\n  /**\n   * The loglevel logger instance that will be used in this {@link Log}\n   */\n  private _log: LogLevelModule.Logger;\n\n  /**\n   * @constructor\n   * @param [options] - Optional settings\n   */\n  constructor(options?: LogOptions) {\n    try {\n      this._log = (options && options.LogLevelModule ? options.LogLevelModule : LogLevelModule).getLogger(PACKAGE_NAME);\n    } catch {\n      // tslint:disable-next-line\n      console.warn('Cannot create custom logger');\n      this._log = console as any;\n    }\n  }\n\n  /**\n   * Log a debug message\n   * @param args - Any number of arguments to be passed to loglevel.debug\n   */\n  debug(...args: any[]): void {\n    this._log.debug(...args);\n  }\n\n  /**\n   * Log an error message\n   * @param args - Any number of arguments to be passed to loglevel.error\n   */\n  error(...args: any[]): void {\n    this._log.error(...args);\n  }\n\n  /**\n   * Log an info message\n   * @param args - Any number of arguments to be passed to loglevel.info\n   */\n  info(...args: any[]): void {\n    this._log.info(...args);\n  }\n\n  /**\n   * Set a default log level to disable all logging below the given level\n   */\n  setDefaultLevel(level: LogLevelModule.LogLevelDesc): void {\n    if (this._log.setDefaultLevel) {\n      this._log.setDefaultLevel(level);\n    } else {\n      // tslint:disable-next-line\n      console.warn('Logger cannot setDefaultLevel');\n    }\n  }\n\n  /**\n   * Log a warning message\n   * @param args - Any number of arguments to be passed to loglevel.warn\n   */\n  warn(...args: any[]): void {\n    this._log.warn(...args);\n  }\n}\n\nexport default Log;\n"]}